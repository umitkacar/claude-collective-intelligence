# Logstash Input Configuration
# Receives logs from multiple sources

# TCP input for application logs
input {
  tcp {
    port => 5000
    codec => json
    type => "tcp-json"
    tags => ["tcp", "json"]
  }
}

# UDP Syslog input
input {
  udp {
    port => 5000
    type => "syslog"
    tags => ["udp", "syslog"]
  }
}

# HTTP REST input (for applications that push JSON)
input {
  http {
    port => 5001
    type => "http-json"
    tags => ["http", "json"]
  }
}

# Beats input (from Filebeat, Auditbeat, Metricbeat)
input {
  beats {
    port => 5044
    type => "beats"
    tags => ["beats"]
  }
}

# RabbitMQ input (if using message queue for log shipping)
input {
  rabbitmq {
    host => "rabbitmq"
    port => 5672
    queue => "logstash-queue"
    durable => true
    exchange => "logstash-exchange"
    exchange_type => "topic"
    key => "logs.#"
    threads => 4
    codec => json
    type => "rabbitmq"
    tags => ["rabbitmq", "queue"]
  }
}

# Kafka input (for high-volume log streaming)
input {
  kafka {
    bootstrap_servers => "kafka:9092"
    topics => ["logs", "events", "metrics"]
    group_id => "logstash-consumer-group"
    auto_offset_reset => "latest"
    consumer_threads => 4
    type => "kafka"
    tags => ["kafka", "streaming"]
  }
}
